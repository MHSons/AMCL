<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Registration Slip</title>
  <style>
    body { font-family: Arial, sans-serif; background:#fff; color:#000; padding:30px; }
    .header { display:flex; justify-content:space-between; align-items:center; }
    .header img { height:70px; }
    h2 { text-align:center; margin:15px 0; color:#0066cc; }
    table { width:100%; border-collapse:collapse; margin-top:20px; }
    td { padding:8px; border:1px solid #444; }
    .btn { margin-top:20px; padding:10px 20px; background:#0066cc; color:#fff; border:none; cursor:pointer; border-radius:5px; }
    .footer { margin-top:30px; font-size:12px; text-align:center; color:#555; }
    #qrcode { margin-top:10px; }
  </style>
</head>
<body>
  <div class="header">
    <img src="logo.png" alt="Lab Logo">
    <div id="qrcode"></div>
  </div>

  <h2>Patient Registration Slip</h2>
  <div id="slipContent"></div>

  <button class="btn" onclick="window.print()">Print Slip</button>

  <div class="footer">
    <p>AlphaMed Clinical Laboratory - Quality Assurance Through Advance Technology</p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  <script>
    let patient = JSON.parse(localStorage.getItem("lastRegisteredPatient"));

    if (!patient) {
      document.body.innerHTML = "<h2>No patient found!</h2>";
    } else {
      let html = `
        <table>
          <tr><td><b>MRN:</b></td><td>${patient.mrn}</td></tr>
          <tr><td><b>Name:</b></td><td>${patient.name}</td></tr>
          <tr><td><b>Age / Gender:</b></td><td>${patient.age} / ${patient.gender}</td></tr>
          <tr><td><b>Departments:</b></td><td>${patient.departments.join(", ")}</td></tr>
          <tr><td><b>Tests:</b></td><td>${patient.tests.join(", ")}</td></tr>
          <tr><td><b>Sample No:</b></td><td><input type="text" placeholder="Enter Sample No"></td></tr>
        </table>
      `;
      document.getElementById("slipContent").innerHTML = html;

      new QRCode(document.getElementById("qrcode"), {
        text: `MRN: ${patient.mrn} | Name: ${patient.name} | Dept: ${patient.departments.join(", ")} | Tests: ${patient.tests.join(", ")}`,
        width: 100,
        height: 100
      });
    }
  </script>
</body>
</html>
