<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Reception - Alpha Lab</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h2>Reception Desk</h2>
    <p class="small">Quickly find patients or register a walk-in.</p>
    <div class="form-row">
      <input id="q" placeholder="Search by name or ID">
      <button id="btnQ" class="btn">Search</button>
      <a class="btn alt" href="register_patient.html">Register New</a>
    </div>
    <div id="resultsArea"></div>
  </div>

  <script>
    document.getElementById('btnQ').addEventListener('click', function(){
      const q = document.getElementById('q').value.toLowerCase().trim();
      const patients = JSON.parse(localStorage.getItem('patients')||'[]');
      const area = document.getElementById('resultsArea');
      if(!q){ area.innerHTML='<div class="small">Enter search term</div>'; return; }
      const found = patients.filter(p => p.id.toLowerCase().includes(q) || p.name.toLowerCase().includes(q));
      if(!found.length){ area.innerHTML='<div class="small">No results</div>'; return; }
      area.innerHTML = found.map(p=>`<div class="list-item"><strong>${p.name}</strong> (${p.id}) <div class="small">Dept: ${p.department}</div>
        <a class="btn" href="registration-slip.html?id=${p.id}" target="_blank">Slip</a></div>`).join('');
    });
  </script>
</body>
</html>
